var place_data = [{
        tag: "taipei_city",
        place: "臺北市",
        low: 15,
        high: 22,
        //107, 106, 105, 104
        police_amount:[7806,7613,7382,7328],
        total_stat:[2304915,2304915,2320576,2327382],
        cases_amount:[35384,34630,36380,35757],
        cases_per:[1.535154225,1.49694063,1.567714223,1.536361457],
        low_edu_per:[13.8609016,14.40763211,14.79986003,15.37865292],
        high_edu_per:[85.32479506,84.72805002,84.29325305,83.65270506],
        weather: "Rainy"
        
    },

    {
        tag: "new_taipei_city",
        place: "新北市",
        low: 15,
        high: 22,
        //107, 106, 105, 104
        police_amount:[7512,7553,7382,7469],
        total_stat:[3505795,3505795,3471785,3453632],
        cases_amount:[36181,39109,39786,41192],
        cases_per:[1.032034104,1.121072634,1.145981102,1.192715379],
        low_edu_per:[22.10970693,22.68396983,23.16102524,23.79147518],
        high_edu_per:[76.80309316,76.15912587,75.60747569,74.90192933],
        weather: "Rainy"
    },

    {
        tag: "taichung_city",
        place: "台中市",
        low: 15,
        high: 22,
        //107, 106, 105, 104
        police_amount:[4297,4085,3922,3875],
        total_stat:[2398398,2398398,2358027,2333199],
        cases_amount:[21852,23515,24198,24624],
        cases_per:[0.911108165,0.988190047,1.026196901,1.055375045],
        low_edu_per:[20.26711163,20.85289017,21.43478425,22.12584525],
        high_edu_per:[78.67722831,78.00549245,77.32829389,76.44539458],
        weather: "Rainy"
    },

    {
        tag: "tainan_city",
        place: "臺南市",
        low: 16,
        high: 24,
        //107, 106, 105, 104
        police_amount:[6541,6294,6130,6086],
        total_stat:[1653327,1653327,1649462,1644921],
        cases_amount:[22085,24120,23446,24655],
        cases_per:[1.335791407,1.459314352,1.42143317,1.498856176],
        low_edu_per:[25.22985471,25.8128629,26.4205541,27.17534763],
        high_edu_per:[78.42697501,77.74889341,77.06769261,76.2699624],
        weather: "Rainy"
    },

    {
        tag: "kaohsiung_city",
        place: "高雄市",
        low: 16,
        high: 24,
        //107, 106, 105, 104
        police_amount:[3899,3781,3636,3615],
        total_stat:[2441541,2441541,2435578,2429331],
        cases_amount:[23068,25568,23736,24363],
        cases_per:[0.944813132,1.047884313,0.974553063,1.002868691],
        low_edu_per:[21.43588824,21.98085709,22.51108361,23.17856233],
        high_edu_per:[73.04447336,72.33764372,71.59922447,70.70303072],
        weather: "Rainy"
    },

    {
        tag: "keelung_city",
        place: "基隆市",
        low: 15,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1355,1288,1214,1197],
        total_stat:[331292,331292,331592,330832],
        cases_amount:[5430,5568,5588,5449],
        cases_per:[1.639037465,1.677831114,1.685203503,1.647059535],
        low_edu_per:[22.73402316,23.34800833,23.83290309,24.45773081],
        high_edu_per:[75.83280007,75.12482786,74.52170137,73.78337041],
        weather: "Rainy"
    },

    {
        tag: "taoyuan_country",
        place: "桃園市",
        low: 15,
        high: 24,
        //107, 106, 105, 104
        police_amount:[7205,6916,6652,6546],
        total_stat:[1886448,1886448,1818456,1778926],
        cases_amount:[18350,19036,18251,18140],
        cases_per:[0.972727581,1.025443231,1.003653649,1.019716391],
        low_edu_per:[20.13959568,20.7187368,21.28772981,22.05043942],
        high_edu_per:[78.67722831,78.00549245,77.32829389,76.44539458],
        weather: "Rainy"
    },

    {
        tag: "hsinchu_city",
        place: "新竹市",
        low: 13,
        high: 21,
        //107, 106, 105, 104
        police_amount:[777,724,700,696],
        total_stat:[368587,368587,361054,357283],
        cases_amount:[3678,3718,4360,5002],
        cases_per:[0.997864819,1.018864615,1.207575598,1.400010636],
        low_edu_per:[18.15338034,18.79692861,19.2724634,19.97744085],
        high_edu_per:[80.89731868,80.17160114,79.59557296,78.78852338],
        weather: "Rainy"
    },

    {
        tag: "hsinchu_country",
        place: "新竹縣",
        low: 19,
        high: 21,
        //107, 106, 105, 104
        police_amount:[1463,1372,1326,1340],
        total_stat:[466222,466222,455791,450205],
        cases_amount:[5768,6500,5988,5435],
        cases_per:[1.237178855,1.410473963,1.313760035,1.207227818],
        low_edu_per:[20.70987641,21.48629236,22.16893269,23.00596395],
        high_edu_per:[78.26743483,77.39943321,76.61142936,75.6459835],
        weather: "Rainy"
    },

    {
        tag: "miaoli_country",
        place: "苗栗縣",
        low: 16,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1275,1188,1126,1100],
        total_stat:[480017,480017,483011,484574],
        cases_amount:[4868,5144,5154,5501],
        cases_per:[1.01413075,1.068090788,1.067056444,1.135223929],
        low_edu_per:[26.83363298,27.5724813,28.17057997,28.87629134],
        high_edu_per:[72.06557268,71.2385825,70.53855916,69.72103332],
        weather: "Rainy"
    },

    {
        tag: "changhua_country",
        place: "彰化縣",
        low: 14,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1239,1208,1186,1111],
        total_stat:[1111395,1111395,1111723,1110215],
        cases_amount:[11819,12583,13179,12604],
        cases_per:[1.063438292,1.131556608,1.185457169,1.1352756],
        low_edu_per:[28.14210969,28.72362429,29.30864973,30.023554],
        high_edu_per:[68.65740803,67.87064482,67.06949483,66.12674122],
        weather: "Rainy"
    },

    {
        tag: "nantou_country",
        place: "南投縣",
        low: 12,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1592,1480,1444,1434],
        total_stat:[443158,443158,446869,448525],
        cases_amount:[5674,5905,6160,6281],
        cases_per:[1.28035599,1.32601871,1.378480047,1.400367872],
        low_edu_per:[30.7770592,31.4588676,32.11433328,32.85011984],
        high_edu_per:[68.65740803,67.87064482,67.06949483,66.12674122],
        weather: "Rainy"
    },

    {
        tag: "yunlin_country",
        place: "雲林縣",
        low: 11,
        high: 24,
        //107, 106, 105, 104
        police_amount:[2867,2745,2626,2620],
        total_stat:[607412,607412,610263,611749],
        cases_amount:[6282,6559,6925,6771],
        cases_per:[1.034223888,1.077264448,1.134756654,1.106826493],
        low_edu_per:[33.67220272,34.36931825,35.06701209,35.8629111],
        high_edu_per:[62.86770759,61.95247817,61.02188728,59.97688595],
        weather: "Cloudy"
    },

    {
        tag: "chiayi_city",
        place: "嘉義市",
        low: 10,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1145,1116,1065,1038],
        total_stat:[231698,231698,231286,230761],
        cases_amount:[3058,3336,3389,3501],
        cases_per:[1.319821492,1.439208953,1.465285404,1.517154112],
        low_edu_per:[18.99023729,19.53372391,20.05525626,20.74050641],
        high_edu_per:[79.43184663,78.77684496,78.14869901,77.34495864],
        weather: "Rainy"
    },

    {
        tag: "chiayi_country",
        place: "嘉義縣",
        low: 12,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1145,1116,1065,1038],
        total_stat:[459304,459304,462401,464103],
        cases_amount:[5344,5390,5474,5602],
        cases_per:[1.163499556,1.16918218,1.183820969,1.20705964],
        low_edu_per:[34.74888092,35.45441925,36.16449791,36.95084927],
        high_edu_per:[62.18321634,61.27924582,60.33940238,59.31506584],
        weather: "Cloudy"
    },

    {
        tag: "pingtung_country",
        place: "屏東縣",
        low: 18,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1042,1011,973,943],
        total_stat:[737305,737305,742006,744174],
        cases_amount:[8908,9655,9474,9638],
        cases_per:[1.208183859,1.306025166,1.276809082,1.295127215],
        low_edu_per:[27.57407043,28.20770873,28.81000962,29.5320718],
        high_edu_per:[70.13542564,69.3558205,68.58798985,67.69505519],
        weather: "Cloudy"
    },

    {
        tag: "yilan_country",
        place: "宜蘭縣",
        low: 20,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1264,1212,1154,1146],
        total_stat:[400858,400858,400702,399935],
        cases_amount:[6416,7285,7345,6480],
        cases_per:[1.600566784,1.81701182,1.833033027,1.620263293],
        low_edu_per:[30.32295726,30.98373045,31.67890352,32.4400215],
        high_edu_per:[67.3186016,66.48916402,65.6243293,64.68876192],
        weather: "Cloudy"
    },

    {
        tag: "hualien_country",
        place: "花蓮縣",
        low: 21,
        high: 24,
        //107, 106, 105, 104
        police_amount:[1065,976,943,920],
        total_stat:[288691,288691,289659,289797],
        cases_amount:[5115,4963,5468,5038],
        cases_per:[1.7717906,1.716410168,1.88773696,1.7384583],
        low_edu_per:[26.6780052,27.48123811,28.16000884,28.95509615],
        high_edu_per:[72.28489977,71.40204046,70.65653061,69.77125367],
        weather: "Sunny"
    },

    {
        tag: "taitung_country",
        place: "台東縣",
        low: 17,
        high: 22,
        //107, 106, 105, 104
        police_amount:[993,935,910,910],
        total_stat:[193181,193181,193476,194216],
        cases_amount:[2682,2234,2803,3117],
        cases_per:[1.388335292,1.156661938,1.448758502,1.604914116],
        low_edu_per:[32.75736227,33.60687991,34.43424507,35.3276764],
        high_edu_per:[65.56804241,64.59133694,63.64148525,62.61173127],
        weather: "Sunny"
    },

    {
        tag: "penghu_country",
        place: "澎湖縣",
        low: 14,
        high: 24,
        //107, 106, 105, 104
        police_amount:[299,269,262,269],
        total_stat:[93434,93434,91777,90612],
        cases_amount:[834,933,960,870],
        cases_per:[0.892608686,1.00609263,1.046013707,0.96013773],
        low_edu_per:[30.78108611,31.55119426,32.3904682,33.51653203],
        high_edu_per:[67.71196781,66.86256537,65.93046188,64.71438662],
        weather: "Cloudy"
    },

    {
        tag: "kinmen_country",
        place: "金門縣",
        low: 15,
        high: 26,
        //107, 106, 105, 104
        police_amount:[823,764,754,743],
        total_stat:[126198,126198,121440,118946],
        cases_amount:[915,826,890,748],
        cases_per:[0.72505111,0.666473018,0.7328722,0.628856792],
        low_edu_per:[20.60809205,21.16334237,21.74818841,22.38326636],
        high_edu_per:[78.00519818,77.2939259,76.54397233,75.72427824],
        weather: "Sunny"
    },

    {
        tag: "lienchiang_country",
        place: "連江縣",
        low: 15,
        high: 20,
        //107, 106, 105, 104
        police_amount:[77,72,76,75],
        total_stat:[11529,11529,11001,10976],
        cases_amount:[90,61,70,70],
        cases_per:[0.780640125,0.539536529,0.63630579,0.637755102],
        low_edu_per:[20.79972244,21.3249602,21.97982002,22.8680758],
        high_edu_per:[75.37514095,74.6240934,73.69330061,72.5127551],
        weather: "Rainy"
    },
];

Chart.defaults.global.defaultFontColor = "rgb(200,200,200)";
Chart.defaults.global.defaultFontSize = 14;
var ctx = document.querySelector('#myChart').getContext('2d');
var ctx2 = document.querySelector('#myChart2').getContext('2d');
var ctxConfig = {
    type: 'bar',
    data: {
        labels: ['107年', '106年', '105年', '104年'],
        datasets: [{
            label: '犯罪比例 (案件/統計人口)',
            data: [0,0,0,0],
            yAxisID:"cases_amount",
            backgroundColor: 'rgba(54, 162, 235, 0.4)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
        },
        {
            label: '國中以下教育率',
            type: 'line',
            yAxisID:"low_edu_per",
            pointBackgroundColor:'rgba(230, 65, 120, 1)',
            pointRadius:5,
            data: [1,1,1,1],
            borderColor:'rgba(230, 65, 120, 1)',
            borderWidth: 2
        },
        {
            label: '高中以上教育率',
            type: 'line',
            yAxisID:"high_edu_per",
            pointBackgroundColor:'rgba(65, 230, 120, 1)',
            pointRadius:5,
            data: [1,1,1,1],
            borderColor:'rgba(65, 230, 120, 1)',
            borderWidth: 2
        }
    ]
    },
    options: {
        // responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"cases_amount",
                ticks: {
                    max: 2,
                    min: 0
                }
            },
            {
                id:"low_edu_per",
                position: 'right',
                ticks: {
                    max: 100,
                    min: 0
                }
            },
            {
                id:"high_edu_per",
                position: 'right',
                display:false,
                ticks: {
                    max: 100,
                    min: 0
                }
            }
        ]
        },
    }
};

var ctxConfig_TaiwanAllCases = {
    type: 'bar',
    
    data: {
        labels: [],
        datasets: [{
            label: '犯罪件數',
            data: [],
            yAxisID:"cases_amount",
            backgroundColor: 'rgba(54, 162, 235, 0.4)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
        },
        {
            label: '國中以下教育率',
            type: 'line',
            yAxisID:"low_edu_per",
            pointBackgroundColor:'rgba(230, 65, 120, 1)',
            pointRadius:5,
            data: [],
            borderColor:'rgba(230, 65, 120, 1)',
            borderWidth: 2
        },
        {
            label: '高中以上教育率',
            type: 'line',
            yAxisID:"high_edu_per",
            pointBackgroundColor:'rgba(65, 230, 120, 1)',
            pointRadius:5,
            data: [],
            borderColor:'rgba(65, 230, 120, 1)',
            borderWidth: 2
        }
    ]
    },
    options: {
        responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"cases_amount",
                ticks: {
                    max: 40000,
                    min: 0
                }
            },
            {
                id:"low_edu_per",
                position: 'right',
                ticks: {
                    max: 100,
                    min: 0
                }
            },
            {
                id:"high_edu_per",
                position: 'right',
                display:false,
                ticks: {
                    max: 100,
                    min: 0
                }
            }
        ]
        },
    }
};

var ctxConfig_CityCases = {
    type: 'line',
    
    data: {
        labels: [],

        datasets: [{
            label: '犯罪件數',
            data: [],
            yAxisID:"cases_amount",
            borderColor: 'rgba(54, 162, 235, 1)',
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            pointBackgroundColor:'rgba(54, 162, 235, 1)',
            pointRadius:5,
            borderWidth: 1
        },
    ]
    },
    options: {
        responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"cases_amount",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            },
        ]
        },
    }
};

var ctxConfig_TemperatureCase = {
    type: 'bar',
    
    data: {
        labels: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],

        datasets: [{
            label: '犯罪件數',
            data: [24349, 18609, 23915, 23404, 23983, 20702, 22690, 21370, 18580, 17041, 14517, 10044],
            yAxisID:"cases_amount",
            borderColor: 'rgba(219, 219, 219, 1)',
            backgroundColor: 'rgba(219, 219, 219, 0.2)',
            pointBackgroundColor:'rgba(219, 219, 219, 1)',
            pointRadius:5,
            borderWidth: 1
        },
        {
            label: '平均氣溫',
            type: 'line',
            data: [16.9, 15.6, 20.6, 23.5, 28.2, 28.5, 30.3, 29.5, 28.2, 23.3, 22.7, 19.5],
            yAxisID:"temperture",
            borderColor: 'rgba(255, 122, 122, 1)',
            backgroundColor: 'rgba(255, 122, 122, 0.2)',
            pointBackgroundColor:'rgba(255, 122, 122, 1)',
            pointRadius:5,
            borderWidth: 1
        },
    ]
    },
    options: {
        responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"cases_amount",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            },
            {
                id:"temperture",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            }
        ]
        },
    }
};

var ctxConfig_RainCase = {
    type: 'bar',
    
    data: {
        labels: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],

        datasets: [{
            label: '犯罪件數',
            data: [24349, 18609, 23915, 23404, 23983, 20702, 22690, 21370, 18580, 17041, 14517, 10044],
            yAxisID:"cases_amount",
            borderColor: 'rgba(219, 219, 219, 1)',
            backgroundColor: 'rgba(219, 219, 219, 0.2)',
            pointBackgroundColor:'rgba(219, 219, 219, 1)',
            pointRadius:5,
            borderWidth: 1
        },
        {
            label: '平均雨量',
            type: 'line',
            data: [255.8, 163.6, 37.3, 59.6, 42.0, 119.8, 190.3, 186.8, 321.9, 125.1, 64.4, 54.4],
            yAxisID:"rain",
            borderColor: 'rgba(64, 172, 255, 1)',
            backgroundColor: 'rgba(64, 172, 255, 0.2)',
            pointBackgroundColor:'rgba(64, 172, 255, 1)',
            pointRadius:5,
            borderWidth: 1
        },
    ]
    },
    options: {
        responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"cases_amount",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            },
            {
                id:"rain",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            }
        ]
        },
    }
};

var ctxConfig_PoliceCase = {
    type: 'bar',
    
    data: {
        labels: [],

        datasets: [{
            label: '案件數量',
            data: [],
            yAxisID:"cases_amount",
            borderColor: 'rgba(219, 219, 219, 1)',
            backgroundColor: 'rgba(219, 219, 219, 0.2)',
            pointBackgroundColor:'rgba(219, 219, 219, 1)',
            pointRadius:5,
            borderWidth: 1
        },
        {
            label: '員警數量',
            type: 'line',
            data: [],
            yAxisID:"temperture",
            borderColor: 'rgba(255, 122, 122, 1)',
            backgroundColor: 'rgba(255, 122, 122, 0.2)',
            pointBackgroundColor:'rgba(255, 122, 122, 1)',
            pointRadius:5,
            borderWidth: 1
        },
    ]
    },
    options: {
        responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"cases_amount",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            },
            {
                id:"temperture",
                position: 'right',
                ticks: {
                    // max: 40000,
                    min: 0
                }
            }
        ]
        },
    }
};

var ctxConfig_PoliceCaseExt = {
    type: 'bar',
    
    data: {
        labels: ["臺北市", "新北市", "台中市", "臺南市", "高雄市", "基隆市", "桃園市", "新竹市", "新竹縣", "苗栗縣", "彰化縣", "南投縣", "雲林縣", "嘉義市", "嘉義縣", "屏東縣", "宜蘭縣", "花蓮縣", "台東縣", "澎湖縣", "金門縣", "連江縣"],

        datasets: [{
            label: '員警數量',
            data: [],
            yAxisID:"plc",
            borderColor: 'rgba(219, 219, 219, 1)',
            backgroundColor: 'rgba(219, 219, 219, 0.2)',
            pointBackgroundColor:'rgba(219, 219, 219, 1)',
            pointRadius:5,
            borderWidth: 1
        },

    ]
    },
    options: {
        responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"plc",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            },

        ]
        },
    }
};

var ctxConfig_CasePie = {
    type: 'pie',
    
    data: {
        labels: ["國小學歷","國中學歷","高中學歷","大學學歷","研究所"],

        datasets: [{
            label: '刑事案件數',
            data: [11732,59413,177042,30828,1965],
            yAxisID:"cases",
            borderColor: [
                '#3AB795',
                '#DA3E52',
                '#F2E94E',
                '#3F88C5',
                '#E5D0E3',

            ],
            backgroundColor: [
                '#3AB795',
                '#DA3E52',
                '#F2E94E',
                '#3F88C5',
                '#E5D0E3',

            ],
            borderWidth: 1
        },

    ]
    },
    options: {
        responsive: true,
        // maintainAspectRatio: false,
        scales: {
            yAxes: [{
                id:"cases",
                ticks: {
                    // max: 40000,
                    min: 0
                }
            },

        ]
        },
    }
};

var myChart = new Chart(ctx, ctxConfig);
var myChart2 = new Chart(ctx2, ctxConfig);

var filter = "";
$("path").click(function (e) {
    let paths = $("path");
    $(".myChart2")[0].hidden = false;
    for (let p of paths){
        p.style.fill =  "transparent";
    }
    
    var tagname = $(this).attr("data-name");
    this.style.fill =  "gold";
    filter = tagname;
    var result = place_data.filter(function (obj) {
        return obj.tag == filter;
    });
    if (result.length == 0) {
        return null;
    }
    $("#place_name")[0].innerHTML = result[0].place;
    $(".myChart h2")[0].textContent = "刑案件數與教育程度之關係";
    $(".myChart2 h2")[0].textContent = "刑案件數";
    // console.log($("#place_name")[0].innerHTML)
    let tmp = [];
    // for(let data in result[0].cases_per){
    //     tmp.push(data*10)
    // }
    ctxConfig.data.datasets[0].data = result[0].cases_per;
    ctxConfig.data.datasets[1].data = result[0].low_edu_per;
    ctxConfig.data.datasets[2].data = result[0].high_edu_per;
    // myChart.update();
    myChart.destroy();
    myChart = new Chart(ctx, ctxConfig);

    let CA = [];
    // console.log(label)
    // console.log(CA)
    // console.log(LEP)
    // console.log(HEP)
    ctxConfig_CityCases.data.labels = [107,106,105,104];
    ctxConfig_CityCases.data.datasets[0].data = result[0].cases_amount
    myChart2.destroy();
    myChart2 = new Chart(ctx2, ctxConfig_CityCases)

});

$(".TaiwanAllCases").click(function(e){

    let paths = $("path");
    $(".myChart2")[0].hidden = true;
    for (let p of paths){
        p.style.fill =  "gold";
    }
    $("#place_name")[0].innerHTML = "全台";
    var tagname = $(this).attr("year");
    console.log(tagname)
    let data_idx;
    if(tagname == "107"){
        data_idx = 0
        $(".myChart h2")[0].textContent = "107案件數vs教育";
    }
    else if(tagname == "106"){
        $(".myChart h2")[0].textContent = "106案件數vs教育";

        data_idx = 1
    }
    else if(tagname == "105"){
        $(".myChart h2")[0].textContent = "105案件數vs教育";

        data_idx = 2
    }
    else if (tagname == "104"){
        $(".myChart h2")[0].textContent = "104案件數vs教育";

        data_idx = 3
    }
    else{
        $(".myChart h2")[0].textContent = "犯罪人之學歷";
        myChart.destroy();
        myChart = new Chart(ctx, ctxConfig_CasePie)
        return;
    }
    let CA = [];
    let LEP = [];
    let HEP = [];
    let label = [];
    for(let data of place_data){
        label.push(data.place)
        CA.push(data.cases_amount[data_idx])
        LEP.push(data.low_edu_per[data_idx])
        HEP.push(data.high_edu_per[data_idx])
    }
    // console.log(label)
    // console.log(CA)
    // console.log(LEP)
    // console.log(HEP)
    ctxConfig_TaiwanAllCases.data.labels = label;
    ctxConfig_TaiwanAllCases.data.datasets[0].data = CA
    ctxConfig_TaiwanAllCases.data.datasets[1].data = LEP;
    ctxConfig_TaiwanAllCases.data.datasets[2].data = HEP;
    myChart.destroy();
    myChart = new Chart(ctx, ctxConfig_TaiwanAllCases)
});

$("#rain").click(function (e) {
    $(".myChart2")[0].hidden = true;
    $(".myChart h2")[0].textContent = "雨量與刑案發生之關係";
    myChart.destroy();
    myChart = new Chart(ctx, ctxConfig_RainCase)

});

$("#temperature").click(function (e) {
    $(".myChart h2")[0].textContent = "氣溫與刑案發生之關係";
    $(".myChart2")[0].hidden = true;
    myChart.destroy();
    myChart = new Chart(ctx, ctxConfig_TemperatureCase)

});


$(".PoliceCases").click(function(e){
    $(".myChart2")[0].hidden = false;
    console.log("IN")
    let paths = $("path");
    for (let p of paths){
        p.style.fill =  "transparent";
    }
    
    var tagname = $(this).attr("data-name");
    this.style.fill =  "gold";

    $("#place_name")[0].innerHTML ="全台";

    var tagname = $(this).attr("year");
    let data_idx;
    if(tagname == "107"){
        data_idx = 0
        $(".myChart h2")[0].textContent = "每年平均員警處理之刑事案件數";
        $(".myChart2 h2")[0].textContent = "員警數量與刑事案件數量之關係";
    }
    else if(tagname == "106"){
        $(".myChart h2")[0].textContent = "每年平均員警處理之刑事案件數";
        $(".myChart2 h2")[0].textContent = "員警數量與刑事案件數量之關係";

        data_idx = 1
    }
    else if(tagname == "105"){
        $(".myChart h2")[0].textContent = "每年平均員警處理之刑事案件數";
        $(".myChart2 h2")[0].textContent = "員警數量與刑事案件數量之關係";

        data_idx = 2
    }
    else{
        $(".myChart h2")[0].textContent = "每年平均員警處理之刑事案件數";
        $(".myChart2 h2")[0].textContent = "員警數量與刑事案件數量之關係";

        data_idx = 3
    }
    let CA = [];
    let PLC = [];
    let EXT = [];
    let label = [];
    for(let data of place_data){
        label.push(data.place)
        CA.push(data.cases_amount[data_idx]);
        PLC.push(data.police_amount[data_idx]);
        EXT.push(data.cases_amount[data_idx] / data.police_amount[data_idx]);
    }
    console.log(label)
    console.log(CA)
    console.log(PLC)
    console.log(EXT)
    ctxConfig_PoliceCase.data.labels = label;
    ctxConfig_PoliceCase.data.datasets[0].data = CA
    ctxConfig_PoliceCase.data.datasets[1].data = PLC;
    myChart2.destroy();
    myChart2 = new Chart(ctx2, ctxConfig_PoliceCase)

    ctxConfig_PoliceCaseExt.labels = label;
    ctxConfig_PoliceCaseExt.data.datasets[0].data = EXT;
    myChart.destroy();
    myChart = new Chart(ctx, ctxConfig_PoliceCaseExt)

});
